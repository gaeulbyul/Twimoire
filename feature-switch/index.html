<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="가을별(Gaeulbyul)">
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Feature switch - Twimoire</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/night-owl.min.css">
        <link href="../css/style.css" rel="stylesheet">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="..">Twimoire</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Pages <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../react/" class="dropdown-item">React</a>
</li>
                                    
<li>
    <a href="../redux-store/" class="dropdown-item">Redux store</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Feature switch</a>
</li>
                                    
<li>
    <a href="../hashflag/" class="dropdown-item">Hashflag</a>
</li>
                                    
<li>
    <a href="../tips/" class="dropdown-item">Tips</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../redux-store/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../hashflag/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/gaeulbyul/Twimoire/edit/main/docs/feature-switch.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#feature-switch" class="nav-link">Feature switch</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#_1" class="nav-link">접근 및 사용</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_2" class="nav-link">스위치 정보</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="feature-switch">Feature switch</h1>
<p>Feature switch는 트위터에서 개발한 기능을 키고끄는 스위치이다. 일부 유저에게만 시험적으로 활성화(A/B 테스팅 등)하는 데 사용하는 것으로 보인다. 또한, 2020년 미국 대선기간동안 트위터에서 <a href="https://blog.twitter.com/en_us/topics/company/2020/2020-election-changes">리트윗버튼을 누르면 인용트윗 입력화면으로 바로 넘어갔었는데</a>, 이를 원래대로 되돌려주는 확장기능 <a href="https://github.com/gaeulbyul/ReturnRetweet">ReturnRetweet</a>의 작동원리도 바로 이 스위치를 조작하는 것이다.</p>
<h2 id="_1">접근 및 사용</h2>
<p>전체 목록은 트위터 웹의 &ldquo;소스 보기&rdquo;에서 <code>window.__INITIAL_STATE__</code>에서도 드러나나, 이 값은 트위터 로딩과정에 삭제되어서 스크립트나 개발자도구로 접근하기 어렵다. 대신, <a href="../redux-store/">Redux store</a>를 통해 접근할 수 있다.</p>
<pre><code class="language-javascript">reduxStore.getState().featureSwitch.user.config
</code></pre>
<p>그리고 값을 수정하는 방법은 두가지가 있는데, 하나는 다음과 같이 Redux store에서 얻어온 객체를 수정하는 방법이고,</p>
<pre><code class="language-javascript">reduxStore.getState().featureSwitch.user.config
  .conversation_controls_change_enabled.value = true
</code></pre>
<p>아니면 쿠키를 통해 바꿀 수 있다. (<code>expires</code>는 적당히 원하는 값으로 적어도 된다. 여러 값을 바꿀때는 구분자로 <code>&amp;</code>를 사용한다.)</p>
<pre><code class="language-javascript">document.cookie = &quot;ab_decider=conversation_controls_change_enabled=true&amp;stateful_login_enabled=false;expires=Tue, 19 Jan 2038 04:14:07 GMT&quot;
</code></pre>
<h2 id="_2">스위치 정보</h2>
<div class="admonition warning 주의">
<p class="admonition-title">Warning</p>
<p>여기서 값을 바꾸는 건 단순히 클라이언트 측 변경이며, 서버측에도 반영되는 것은 아니다. 또한 이 스위치들은 사전에 예고없이 추가되거나, 바뀌거나, 사라질 수 있다.</p>
</div>
<p>이름만 갖고 쉽게 알 수 있는건 생략한다. (가령, <code>hashflags_animation_like_button_enabled</code> 등)</p>
<ul>
<li><code>c9s_*</code> - 트위터의 &ldquo;커뮤니티&rdquo; 기능 관련 스위치이다. 이 값을 바꾸면 커뮤니티 탭 등 UI는 드러나나 아직은 관련 기능에 접근할 순 없다.</li>
<li><code>conversation_controls_change_enabled</code> - <code>true</code>일 경우 내 트윗에 답글을 달 수 있는 사람을 바꿀수 있는 메뉴가 뜬다.</li>
<li><code>media_minimal_image_crop_enabled</code> - 타임라인의 섬네일에서 세로로 긴 이미지를 자르지 않도록 한다.</li>
<li><code>responsive_web_article_nudge_enabled</code> - 기사를 읽지않고 리트윗하려고 할 때 안내문이 뜬다.</li>
<li><code>responsive_web_birdwatch_*</code> - Birdwatch는 트위터의 가짜정보를 제보하는 기능이다. 한국어 UI번역은 있으나 실제로 기능을 사용할 수는 없더라.</li>
<li><code>responsive_web_reactions_enabled</code> - 트위터의 새로운 반응 기능. &ldquo;마음에 들어요&rdquo;뿐만 아니라 &ldquo;흐음&hellip;&rdquo;, &ldquo;응원해요&rdquo;, &ldquo;슬퍼요&rdquo; 등의 반응을 추가할 수 있다.</li>
<li><code>responsive_web_reply_nudge_enabled</code></li>
<li><code>rito_safety_mode_settings_enabled</code> - 트위터에서 도입예정인 자동차단 관련 기능. 아직 사용할 순 없다.</li>
<li><code>stateful_login_enabled</code> - <code>false</code>면 로그인시 로그인네임과 암호를 함께 입력하고, <code>true</code>면 로그인네임 입력 후 암호를 따로 입력한다. (<code>true</code>일 때 일부 암호관리자의 자동입력기능이 작동하지 않을 수 있다.)</li>
<li><code>voice_rooms_*</code> - 트위터 스페이스 관련. 참고로, <code>voice_consumption_enabled</code>는 트위터 스페이스가 아니라 음성트윗 기능이다.</li>
</ul>
<h3 id="media_minimal_image_crop_enabled"><code>media_minimal_image_crop_enabled</code>적용 사진</h3>
<p><img alt="트위터 타임라인 스크린샷. unsplash 계정이 올린 사진이 잘린 부분 없이 나타난다. 사진은 중앙에 달이 떠있는 바다사진." src="../images/media_minimal_image_crop_enabled.jpg" /></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../js/script.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
